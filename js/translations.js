// Traducciones multiidioma
const translations = {
    ca: {
        nav: {
            about: "Sobre mi",
            experience: "Experiència",
            education: "Educació",
            skills: "Habilitats",
            interests: "Interessos",
            awards: "Títols",
            contact: "Contacte",
            download_cv: "Descarregar CV"
        },
        success: {
            title: "Missatge Enviat!",
            message: "Gràcies per contactar amb mi. Et respondré el més aviat possible.",
            back: "Tornar a l'Inici"
        },
        contact: {
            title: "Contacta'm",
            name: "Nom",
            email: "Correu electrònic",
            message: "Missatge",
            submit: "Enviar"
        },
        about: {
            title: "Alexander",
            surname: "Yerga Busquet",
            address: "Vilafranca del Penedès, Barcelona · (+34) 633 33 60 70 ·",
            email: "alexanderyergabusquet@gmail.com",
            description: "Sóc un tècnic informàtic apassionat per la tecnologia i la resolució de problemes. Tinc experiència en manteniment de sistemes, configuració de xarxes i suport tècnic. M'agrada aprendre contínuament i estar al dia de les últimes novetats tecnològiques. Busco oportunitats per créixer professionalment i aportar els meus coneixements en un entorn dinàmic.",
            scan_qr: "Escaneja per connectar"
        },
        experience: {
            title: "Experiència",
            job1: {
                title: "Tècnic Informàtic",
                company: "Clinica del Mobil - La teva botiga de confiança",
                date: "Octubre 2024 - Març 2025",
                description: "Reparació i manteniment de dispositius mòbils i informàtics. Atenció al client i gestió de la botiga. Diagnòstic i resolució d'incidències de maquinari i programari."
            }
        },
        education: {
            title: "Educació",
            school1: {
                name: "IES Eugeni d'Ors",
                degree: "Tècnic en Sistemes Microinformàtics i Xarxes (SMR)",
                date: "Setembre 2022 - Juny 2025",
                description: "Formació en muntatge i manteniment d'equips, sistemes operatius, xarxes locals i seguretat informàtica."
            },
            school2: {
                name: "IES l'Arboç",
                degree: "Educació Secundària Obligatòria (ESO)",
                date: "Setembre 2018 - Juny 2022",
                description: "Graduat en Educació Secundària Obligatòria."
            }
        },
        skills: {
            title: "Habilitats",
            subtitle: "Llenguatges de Programació i Eines",
            list: "Microsoft Office, Configuració de servidors, Manteniment de Hardware, Xarxes, Windows, Linux"
        },
        interests: {
            title: "Interessos",
            paragraph1: "A part de ser tècnic informàtic, gaudeixo del meu temps lliure explorant les últimes novetats tecnològiques, muntant i reparant ordinadors per diversió, i aprenent sobre ciberseguretat.",
            paragraph2: "També m'agrada jugar a videojocs, veure sèries de ciència-ficció i passar temps amb els amics."
        },
        awards: {
            title: "Certificacions",
            award1: "Introduction to Cybersecurity - Cisco (Exp: Nov 2025)",
            award2: "CCNA: Introduction to Networks - Cisco (Exp: Set 2024)"
        }
    },
    es: {
        nav: {
            about: "Sobre mí",
            experience: "Experiencia",
            education: "Educación",
            skills: "Habilidades",
            interests: "Intereses",
            awards: "Títulos",
            contact: "Contacto",
            download_cv: "Descargar CV"
        },
        success: {
            title: "¡Mensaje Enviado!",
            message: "Gracias por contactar conmigo. Te responderé lo antes posible.",
            back: "Volver al Inicio"
        },
        contact: {
            title: "Contáctame",
            name: "Nombre",
            email: "Correo electrónico",
            message: "Mensaje",
            submit: "Enviar"
        },
        about: {
            title: "Alexander",
            surname: "Yerga Busquet",
            address: "Vilafranca del Penedès, Barcelona · (+34) 633 33 60 70 ·",
            email: "alexanderyergabusquet@gmail.com",
            description: "Soy un técnico informático apasionado por la tecnología y la resolución de problemas. Tengo experiencia en mantenimiento de sistemas, configuración de redes y soporte técnico. Me gusta aprender continuamente y estar al día de las últimas novedades tecnológicas. Busco oportunidades para crecer profesionalmente y aportar mis conocimientos en un entorno dinámico.",
            scan_qr: "Escanea para conectar"
        },
        experience: {
            title: "Experiencia",
            job1: {
                title: "Técnico Informático",
                company: "Clinica del Mobil - La teva botiga de confianza",
                date: "Octubre 2024 - Marzo 2025",
                description: "Reparación y mantenimiento de dispositivos móviles e informáticos. Atención al cliente y gestión de la tienda. Diagnóstico y resolución de incidencias de hardware y software."
            }
        },
        education: {
            title: "Educación",
            school1: {
                name: "IES Eugeni d'Ors",
                degree: "Técnico en Sistemas Microinformáticos y Redes (SMR)",
                date: "Septiembre 2022 - Junio 2025",
                description: "Formación en montaje y mantenimiento de equipos, sistemas operativos, redes locales y seguridad informática."
            },
            school2: {
                name: "IES l'Arboç",
                degree: "Educación Secundaria Obligatoria (ESO)",
                date: "Septiembre 2018 - Junio 2022",
                description: "Graduado en Educación Secundaria Obligatoria."
            }
        },
        skills: {
            title: "Habilidades",
            subtitle: "Lenguajes de Programación y Herramientas",
            list: "Microsoft Office, Configuración de servidores, Mantenimiento de Hardware, Redes, Windows, Linux"
        },
        interests: {
            title: "Intereses",
            paragraph1: "Aparte de ser técnico informático, disfruto de mi tiempo libre explorando las últimas novedades tecnológicas, montando y reparando ordenadores por diversión, y aprendiendo sobre ciberseguridad.",
            paragraph2: "También me gusta jugar a videojuegos, ver series de ciencia ficción y pasar tiempo con los amigos."
        },
        awards: {
            title: "Certificaciones",
            award1: "Introduction to Cybersecurity - Cisco (Exp: Nov 2025)",
            award2: "CCNA: Introduction to Networks - Cisco (Exp: Sep 2024)"
        }
    },
    en: {
        nav: {
            about: "About",
            experience: "Experience",
            education: "Education",
            skills: "Skills",
            interests: "Interests",
            awards: "Awards",
            contact: "Contact",
            download_cv: "Download CV"
        },
        contact: {
            title: "Contact Me",
            name: "Name",
            email: "Email",
            message: "Message",
            submit: "Send"
        },
        success: {
            title: "Message Sent!",
            message: "Thank you for contacting me. I will reply shortly.",
            back: "Back to Home"
        },
        about: {
            title: "Alexander",
            surname: "Yerga Busquet",
            address: "Vilafranca del Penedès, Barcelona · (+34) 633 33 60 70 ·",
            email: "alexanderyergabusquet@gmail.com",
            description: "I am an IT technician passionate about technology and problem-solving. I have experience in system maintenance, network configuration, and technical support. I enjoy continuous learning and keeping up to date with the latest technological trends. I am looking for opportunities to grow professionally and contribute my knowledge in a dynamic environment.",
            scan_qr: "Scan to connect"
        },
        experience: {
            title: "Experience",
            job1: {
                title: "IT Technician",
                company: "Clinica del Mobil - La teva botiga de confiança",
                date: "October 2024 - March 2025",
                description: "Repair and maintenance of mobile and computer devices. Customer service and store management. Diagnosis and resolution of hardware and software incidents."
            }
        },
        education: {
            title: "Education",
            school1: {
                name: "IES Eugeni d'Ors",
                degree: "Technician in Microcomputer Systems and Networks (SMR)",
                date: "September 2022 - June 2025",
                description: "Training in equipment assembly and maintenance, operating systems, local networks, and computer security."
            },
            school2: {
                name: "IES l'Arboç",
                degree: "Compulsory Secondary Education (ESO)",
                date: "September 2018 - June 2022",
                description: "Graduate in Compulsory Secondary Education."
            }
        },
        skills: {
            title: "Skills",
            subtitle: "Programming Languages & Tools",
            list: "Microsoft Office, Server Configuration, Hardware Maintenance, Networking, Windows, Linux"
        },
        interests: {
            title: "Interests",
            paragraph1: "Apart from being an IT technician, I enjoy my free time exploring the latest technological news, building and repairing computers for fun, and learning about cybersecurity.",
            paragraph2: "I also like playing video games, watching sci-fi series, and spending time with friends."
        },
        awards: {
            title: "Certifications",
            award1: "Introduction to Cybersecurity - Cisco (Exp: Nov 2025)",
            award2: "CCNA: Introduction to Networks - Cisco (Exp: Sep 2024)"
        }
    }
};

// Función para obtener valor anidado del objeto de traducciones
function getNestedTranslation(obj, path) {
    return path.split('.').reduce((current, key) => current?.[key], obj);
}

// Función para cambiar el idioma
function changeLanguage(lang) {
    const elements = document.querySelectorAll('[data-i18n]');

    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = getNestedTranslation(translations[lang], key);

        if (translation) {
            element.innerHTML = translation;
        }
    });

    // Actualizar el atributo lang del HTML
    document.documentElement.lang = lang;

    // Guardar preferencia en localStorage
    localStorage.setItem('preferredLanguage', lang);
}

// Inicializar el selector de idioma
document.addEventListener('DOMContentLoaded', function () {
    const languageSelect = document.getElementById('languageSelect');

    // Cargar idioma guardado o usar catalán por defecto
    const savedLanguage = localStorage.getItem('preferredLanguage') || 'ca';
    languageSelect.value = savedLanguage;
    changeLanguage(savedLanguage);

    // Escuchar cambios en el selector
    languageSelect.addEventListener('change', function () {
        changeLanguage(this.value);
    });
});

// Dark Mode Logic
document.addEventListener('DOMContentLoaded', () => {
    const themeToggle = document.getElementById('themeToggle');
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    const icon = themeToggle.querySelector('i');

    function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);

        if (theme === 'dark') {
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
        } else {
            icon.classList.remove('fa-sun');
            icon.classList.add('fa-moon');
        }
    }

    // Load saved preference
    const currentTheme = localStorage.getItem('theme');
    if (currentTheme) {
        setTheme(currentTheme);
    } else if (prefersDarkScheme.matches) {
        setTheme('dark');
    }

    // Toggle event
    if (themeToggle) {
        themeToggle.addEventListener('click', () => {
            let theme = document.documentElement.getAttribute('data-theme');
            if (theme === 'dark') {
                setTheme('light');
            } else {
                setTheme('dark');
            }
        });
    }
});

// Contact Modal Logic
document.addEventListener('DOMContentLoaded', () => {
    const contactBtn = document.getElementById('contactBtn');
    const contactModal = document.getElementById('contactModal');
    const closeModal = document.querySelector('.close-modal');

    if (contactBtn && contactModal && closeModal) {
        contactBtn.addEventListener('click', (e) => {
            e.preventDefault();
            contactModal.classList.add('show');
        });

        closeModal.addEventListener('click', () => {
            contactModal.classList.remove('show');
        });

        window.addEventListener('click', (e) => {
            if (e.target === contactModal) {
                contactModal.classList.remove('show');
            }
        });
    }
});
